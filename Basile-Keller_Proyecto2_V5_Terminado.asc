* PROGRAMA PROYECTO 2 BASILE-KELLER

*Basile Álvarez Andrés José
*Keller Ascencio Rodolfo Andrés

***********************************
* DECLARACIÓN DE CONSTANTES
***********************************

SCDR                    EQU $102F
SCCR2                   EQU $102D
SCSR                    EQU $102E
SCCR1                   EQU $102C
BAUD                    EQU $102B
HPRIO                   EQU $103C
SPCR                    EQU $1028
CSCTL                   EQU $105D
OPT2                    EQU $1038
DDRD                    EQU $1009

***********************************
* DECLARACIÓN DE VARIABLES
***********************************
ORDEN                   EQU $0000
CHAR_ENTRADA            EQU $0001
NUMERO_CARACTERES       EQU $0002

DIRECCION_CHAR_ACTUAL   EQU $0021
CARACTER                EQU $0022
CONTADOR_POSICION       EQU $0023
CONTADOR_MILLAR         EQU $0024
CONTADOR_CENTENA        EQU $0025
CONTADOR_DECENA         EQU $0026
CONTADOR_UNIDAD      	EQU $0027
DIGITO_MILLAR           EQU $0028
DIGITO_CENTENA          EQU $0029
DIGITO_DECENA           EQU $002A
DIGITO_UNIDAD        	EQU $002B
CONT 					EQU $0030
REF						EQU	$0032
REFT					EQU	$0033
REFC					EQU	$0034
REFL					EQU	$0035
REFD					EQU	$0036
REFM					EQU	$0037
DIRECCION_ENTRADA       EQU $0050
DIRECCION_TEXTO         EQU $0070
DIRECCION_CONVERSION    EQU $0020 

	ORG 	$8000
	JMP 	PROCESO_OK 
INICIO
	LDS 	#$00FF
	JSR 	SERIAL

	**********************
	* LIMPIA LAS VARIABLES
	**********************
	CLR 	NUMERO_CARACTERES      
      
***********************************************
* CICLO QUE ESPERA HASTA QUE LLEGUE UN CARACTER
***********************************************
CICLATE
	LDAA 	#'?
	STAA 	ORDEN
CICLO
	LDAB 	ORDEN
	CMPB 	#'?
	BEQ  	CICLO

ENTRADA_DE_USUARIO
	LDX 	#DIRECCION_ENTRADA
	CLR 	CHAR_ENTRADA
	STAB 	$00,X
	INX                    

LOOP
	LDAA 	CHAR_ENTRADA
	BEQ  	LOOP
	CLR  	CHAR_ENTRADA
	LDAB 	ORDEN
	STAB 	$00,X
	INX
	INC 	NUMERO_CARACTERES
	CMPB 	#'=
	BEQ 	PROGRAMA
	CMPB 	#'K
	BEQ 	VALIDA_OK
	BNE  	LOOP

*********************************************************
* PROGRAMA DE CONVERSIÓN A PARTIR DE RECEPCIÓN DE ENTRADA
*********************************************************

PROGRAMA				
	LDX 	#DIRECCION_ENTRADA
	JMP 	VALIDA_ROMANO
      
****************************************
* VALIDACIÓN DE ENTRADAS
*****************************************

***************************
* VALIDACIÓN ENTRADA ROMANO
***************************

VALIDA_ROMANO
	LDAB 	$00,X             
	CMPB 	#'M
	BEQ 	PROCESO_REVISION_ROMANO       
	CMPB 	#'D
	BEQ 	PROCESO_REVISION_ROMANO 
	CMPB 	#'C
	BEQ 	PROCESO_REVISION_ROMANO 
	CMPB 	#'L
	BEQ 	PROCESO_REVISION_ROMANO 
	CMPB 	#'X 
	BEQ 	PROCESO_REVISION_ROMANO 
	CMPB 	#'V
	BEQ 	PROCESO_REVISION_ROMANO
	CMPB 	#'I 
	BEQ 	PROCESO_REVISION_ROMANO
	LDAA 	#$39
	BNE 	SALTO_VALIDA_DECIMAL

SALTO_VALIDA_DECIMAL
	JMP 	VALIDA_DECIMAL

VALIDA_OK
	LDX 	#DIRECCION_ENTRADA
	LDAB 	$00,X 
	CMPB 	#'O
	BEQ 	SALTO_VERIFICA_LONGITUD_OK
	JMP 	ERROR_ENTRADA

SALTO_VERIFICA_LONGITUD_OK
	JMP 	VERIFICA_LONGITUD_OK

PROCESO_REVISION_ROMANO
	INX
	LDAB 	$00,X 
	CMPB 	#'=
	BNE 	REVISION_ROMANO
	JMP	 	VERIFICA_ROMANO	

REVISION_ROMANO       
	CMPB 	#'M
	BEQ 	PROCESO_REVISION_ROMANO       
	CMPB 	#'D
	BEQ 	PROCESO_REVISION_ROMANO 
	CMPB 	#'C
	BEQ 	PROCESO_REVISION_ROMANO 
	CMPB 	#'L
	BEQ 	PROCESO_REVISION_ROMANO 
	CMPB 	#'X 
	BEQ 	PROCESO_REVISION_ROMANO 
	CMPB 	#'V
	BEQ 	PROCESO_REVISION_ROMANO
	CMPB 	#'I 
	BEQ 	PROCESO_REVISION_ROMANO
	JMP 	ERROR_ENTRADA

***************************
* VALIDACIÓN ROMANO VÁLIDO
***************************

VERIFICA_ROMANO
	LDX 	#DIRECCION_ENTRADA
	XGDX
	ADDB 	NUMERO_CARACTERES
	XGDX
	DEX

ESTADO_VERIFICACION_1
	LDAA 	$00,X
	CMPA 	#'I
	BEQ 	ESTADO_VERIFICACION_1_1
	BNE		ESTADO_VERIFICACION_2

ESTADO_VERIFICACION_1_1
	LDAB 	REF
	CMPB	#03
	BLS		ESTADO_VERIFICACION_1_2
	JMP 	ERROR_ROMANO

ESTADO_VERIFICACION_1_2
	LDD 	CONT
	ADDD	#01
	STD 	CONT
	INC 	REF
	DEX
	JMP 	ESTADO_VERIFICACION_1

ESTADO_VERIFICACION_2
	LDAA 	$00,X
	CMPA 	#'V
	BEQ 	ESTADO_VERIFICACION_2_1
	BNE		ESTADO_VERIFICACION_3

ESTADO_VERIFICACION_2_1
	LDAB 	REF
	CMPB	#04
	BLS		ESTADO_VERIFICACION_2_2
	JMP 	ERROR_ROMANO

ESTADO_VERIFICACION_2_2
	LDD 	CONT
	ADDD	#05
	STD 	CONT
	INC 	REF
	DEX
	JMP 	ESTADO_VERIFICACION_2_3		

ESTADO_VERIFICACION_2_3
	LDAA 	$00,X
	CMPA 	#'I
	BEQ 	ESTADO_VERIFICACION_2_4
	BNE		ESTADO_VERIFICACION_3

ESTADO_VERIFICACION_2_4
	LDAB 	REF
	CMPB	#01
	BEQ		ESTADO_VERIFICACION_2_5	
	JMP 	ERROR_ROMANO

ESTADO_VERIFICACION_2_5
	LDD 	CONT
	SUBD	#01
	STD 	CONT
	INC 	REF
	DEX
	JMP 	ESTADO_VERIFICACION_3	

ESTADO_VERIFICACION_3
	LDAA 	$00,X
	CMPA 	#'X
	BEQ 	ESTADO_VERIFICACION_3_1
	BNE		ESTADO_VERIFICACION_4

ESTADO_VERIFICACION_3_1
	LDAB 	REFT
	CMPB	#03
	BLS		ESTADO_VERIFICACION_3_2	
	JMP 	ERROR_ROMANO

ESTADO_VERIFICACION_3_2
	LDD 	CONT
	ADDD	#10
	STD 	CONT
	INC 	REF
	INC 	REFT
	DEX
	JMP 	ESTADO_VERIFICACION_3_3	

ESTADO_VERIFICACION_3_3
	LDAA 	$00,X
	CMPA 	#'I
	BEQ 	ESTADO_VERIFICACION_3_4
	BNE		ESTADO_VERIFICACION_3

ESTADO_VERIFICACION_3_4
	LDAB 	REFT
	CMPB	#01
	BEQ		ESTADO_VERIFICACION_3_5	
	JMP 	ERROR_ROMANO

ESTADO_VERIFICACION_3_5
	LDD 	CONT
	SUBD	#01
	STD 	CONT
	INC 	REF
	INC 	REFT
	DEX
	JMP 	ESTADO_VERIFICACION_3	

ESTADO_VERIFICACION_4
	LDAA 	$00,X
	CMPA 	#'L
	BEQ 	ESTADO_VERIFICACION_4_1
	BNE		ESTADO_VERIFICACION_5

ESTADO_VERIFICACION_4_1
	LDD 	CONT
	ADDD	#50
	STD 	CONT
	INC 	REF
	INC 	REFL
	DEX
	JMP 	ESTADO_VERIFICACION_4_2	

ESTADO_VERIFICACION_4_2
	LDAA 	$00,X
	CMPA 	#'X
	BEQ 	ESTADO_VERIFICACION_4_3
	BNE		ESTADO_VERIFICACION_5

ESTADO_VERIFICACION_4_3
	LDAB 	REFL
	CMPB	#01
	BEQ		ESTADO_VERIFICACION_4_4	
	JMP 	ERROR_ROMANO	

ESTADO_VERIFICACION_4_4
	LDAB 	REFT
	CMPB	#00
	BEQ		ESTADO_VERIFICACION_4_5	
	JMP 	ERROR_ROMANO

ESTADO_VERIFICACION_4_5
	LDD 	CONT
	SUBD	#10
	STD 	CONT
	INC 	REF
	DEX
	JMP 	ESTADO_VERIFICACION_5

ESTADO_VERIFICACION_5
	LDAA 	$00,X
	CMPA 	#'C
	BEQ 	ESTADO_VERIFICACION_5_1
	BNE		ESTADO_VERIFICACION_6

ESTADO_VERIFICACION_5_1
	LDAB 	REFC
	CMPB	#03
	BLS		ESTADO_VERIFICACION_5_2	
	JMP 	ERROR_ROMANO

ESTADO_VERIFICACION_5_2
	LDD 	CONT
	ADDD	#100
	STD 	CONT
	INC 	REF
	INC 	REFC
	DEX
	JMP 	ESTADO_VERIFICACION_5_3	

ESTADO_VERIFICACION_5_3
	LDAA 	$00,X
	CMPA 	#'X
	BEQ 	ESTADO_VERIFICACION_5_4
	BNE		ESTADO_VERIFICACION_5

ESTADO_VERIFICACION_5_4
	LDAB 	REFC
	CMPB	#01
	BEQ		ESTADO_VERIFICACION_5_5	
	JMP 	ERROR_ROMANO

ESTADO_VERIFICACION_5_5
	LDD 	CONT
	SUBD	#10
	STD 	CONT
	INC 	REF
	INC 	REFC
	DEX
	JMP 	ESTADO_VERIFICACION_5

ESTADO_VERIFICACION_6
	LDAA 	$00,X
	CMPA 	#'D
	BEQ 	ESTADO_VERIFICACION_6_1
	BNE		ESTADO_VERIFICACION_7

ESTADO_VERIFICACION_6_1
	LDD 	CONT
	ADDD	#500
	STD 	CONT
	INC 	REF
	INC 	REFD
	DEX
	JMP 	ESTADO_VERIFICACION_6_2

ESTADO_VERIFICACION_6_2
	LDAA 	$00,X
	CMPA 	#'C
	BEQ 	ESTADO_VERIFICACION_6_3
	BNE		ESTADO_VERIFICACION_7

ESTADO_VERIFICACION_6_3
	LDAB 	REFC
	CMPB	#00
	BEQ		ESTADO_VERIFICACION_6_4	
	JMP 	ERROR_ROMANO	

ESTADO_VERIFICACION_6_4
	LDAB 	REFD
	CMPB	#01
	BEQ		ESTADO_VERIFICACION_6_5		
	JMP 	ERROR_ROMANO	

ESTADO_VERIFICACION_6_5
	LDD 	CONT
	SUBD	#100
	STD 	CONT
	INC 	REF
	INC 	REFC
	DEX
	JMP 	ESTADO_VERIFICACION_7

ESTADO_VERIFICACION_7
	LDAA 	$00,X
	CMPA 	#'M
	BEQ 	ESTADO_VERIFICACION_7_1
	CPX		#$004F
	BEQ		SALTO_PROCESO_ROMANO	
	JMP	 	ERROR_ROMANO

SALTO_PROCESO_ROMANO
	JMP 	PROCESO_ROMANO

ESTADO_VERIFICACION_7_1
	LDD 	CONT
	ADDD	#1000
	STD 	CONT
	INC 	REF
	INC 	REFM
	DEX
	JMP 	ESTADO_VERIFICACION_7_2

ESTADO_VERIFICACION_7_2
	LDAA 	$00,X
	CMPA 	#'C
	BEQ 	ESTADO_VERIFICACION_7_3
	BNE		ESTADO_VERIFICACION_7_4

ESTADO_VERIFICACION_7_3
	LDAB 	REFM
	CMPB	#01
	BEQ		ESTADO_VERIFICACION_7_5	
	JMP 	ERROR_ROMANO

ESTADO_VERIFICACION_7_4
	LDAB 	REF
	CMPB	#21
	BEQ		SALTO_PROCESO_ROMANO
	JMP 	ESTADO_VERIFICACION_7	

ESTADO_VERIFICACION_7_5
	LDD 	CONT
	SUBD	#100
	STD 	CONT
	INC 	REF
	INC 	REFM
	DEX
	JMP 	ESTADO_VERIFICACION_7

************************
* VALIDACIÓN DE OK
************************

VERIFICA_LONGITUD_OK
	LDAB 	NUMERO_CARACTERES
	CMPB 	#$01
	BNE 	SALTO_ERROR_ENTRADA

PROCESO_OK	
    LDX 	#CHAR_ENTRADA
    JMP 	LIMPIEZA

************************
* VALIDACIÓN DECIMAL
************************

VALIDA_DECIMAL
	LDAB 	$00,X              
	CBA 
	BEQ 	PROCESO_REVISION_DECIMAL
	DECA
	CMPA 	#$2F                                       
	BNE 	VALIDA_DECIMAL
	BEQ 	SALTO_ERROR_ENTRADA
SALTO_ERROR_ENTRADA
    JMP 	ERROR_ENTRADA      

PROCESO_REVISION_DECIMAL
	LDAA 	#$39
	INX                                             
	LDAB 	$00,X
	CMPB 	#'=
	BEQ 	VALIDA_CANTIDAD_DIGITOS
	BNE 	VALIDA_DECIMAL      

VALIDA_CANTIDAD_DIGITOS
	LDAA 	NUMERO_CARACTERES
	CMPA 	#01
	BEQ 	SALTO_PROCESO_DECIMAL
	CMPA 	#02
	BEQ 	SALTO_PROCESO_DECIMAL
	CMPA 	#03
	BEQ 	SALTO_PROCESO_DECIMAL
	CMPA 	#04
	BEQ 	SALTO_PROCESO_DECIMAL
	BNE 	SALTO_ERROR_DECIMAL

SALTO_PROCESO_DECIMAL
	JMP 	PROCESO_DECIMAL

SALTO_ERROR_DECIMAL
	JMP 	ERROR_DECIMAL


***************************
* PROCESAMIENTO ROMANO
***************************

PROCESO_ROMANO
	LDD		CONT
	LDX		#1000
	IDIV
	XGDX
	STAB	DIGITO_MILLAR
	XGDX
	LDX		#100
	IDIV
	XGDX
	STAB	DIGITO_CENTENA
	XGDX
	LDX		#10
	IDIV
	XGDX
	STAB	DIGITO_DECENA
	XGDX
	STAB	DIGITO_UNIDAD
	JMP 	IMPRESION_CONVERSION

****************************
* IMPRESION ROMANO A DECIMAL
****************************	

IMPRESION_CONVERSION
	LDX 	#DIRECCION_ENTRADA
	XGDX
	ADDB 	NUMERO_CARACTERES
	XGDX
	STX 	DIRECCION_CONVERSION
	LDX 	DIRECCION_CONVERSION
	INX
IMPRIME_MILLARES
	LDAA	DIGITO_MILLAR
	ADDA	#$30
	CMPA	#$00
	BEQ	IMPRIME_CENTENAS
	STAA	$00,X
	INX
IMPRIME_CENTENAS
	LDAA	DIGITO_CENTENA
	ADDA	#$30
	CMPA	#$00
	BEQ	IMPRIME_DECENAS
	STAA	$00,X
	INX
IMPRIME_DECENAS
	LDAA	DIGITO_DECENA
	ADDA	#$30
	CMPA	#$00
	BEQ	IMPRIME_UNIDADES
	STAA	$00,X
	INX
IMPRIME_UNIDADES
	LDAA	DIGITO_UNIDAD
	ADDA	#$30
	STAA	$00,X
	INX
	JMP 	PROCESO_ESCRITURA

***************************
* PROCESAMIENTO DECIMAL
***************************

PROCESO_DECIMAL
	LDAA 	NUMERO_CARACTERES
	STAA 	DIRECCION_CHAR_ACTUAL
	DEC 	DIRECCION_CHAR_ACTUAL
	INCA  
	ADDA 	#DIRECCION_ENTRADA
	STAA 	DIRECCION_CONVERSION
	CLR 	DIRECCION_CHAR_ACTUAL

TRABAJANDO_DIGITOS
	LDX   	#DIRECCION_ENTRADA                        
	XGDX                                            
	ADDB  	DIRECCION_CHAR_ACTUAL                     
	XGDX                                            
	LDAA  	$00,X                                     
	CMPA  	#'=         
	BEQ   	SALTA_ESCRITURA
	SUBA  	#$30                                
	STAA  	CARACTER                            
	LDAA  	NUMERO_CARACTERES
	CMPA  	#$04
	BEQ   	TRABAJANDO_NUM_CUATRO_DIGITOS
	CMPA 	#$03
	BEQ 	TRABAJANDO_NUM_TRES_DIGITOS
	CMPA 	#$02
	BEQ 	TRABAJANDO_NUM_DOS_DIGITOS
	JMP 	TRABAJANDO_UNIDAD	

SALTA_ESCRITURA
	JMP 	PROCESO_ESCRITURA

TRABAJANDO_NUM_CUATRO_DIGITOS
	LDAA 	CONTADOR_POSICION
	CMPA 	#$00
	BEQ		SALTO_TRABAJANDO_MILLAR
	CMPA 	#$01
	BEQ 	SALTO_TRABAJANDO_CENTENA
	CMPA 	#$02
	BEQ 	SALTO_TRABAJANDO_DECENA
	JMP 	TRABAJANDO_UNIDAD

TRABAJANDO_NUM_TRES_DIGITOS
	LDAA 	CONTADOR_POSICION
	CMPA 	#$00
	BEQ		SALTO_TRABAJANDO_CENTENA
	CMPA 	#$01
	BEQ 	SALTO_TRABAJANDO_DECENA
	JMP 	TRABAJANDO_UNIDAD

TRABAJANDO_NUM_DOS_DIGITOS
	LDAA 	CONTADOR_POSICION
	CMPA 	#$00
	BEQ		SALTO_TRABAJANDO_DECENA
	JMP 	TRABAJANDO_UNIDAD

SALTO_TRABAJANDO_MILLAR
	JMP   	TRABAJANDO_MILLAR
SALTO_TRABAJANDO_CENTENA
	JMP   	TRABAJANDO_CENTENA
SALTO_TRABAJANDO_DECENA
	JMP   	TRABAJANDO_DECENA	


*********************************
* CONVERSIÓN DECIMAL A ROMANO
*********************************

*********************
* CONVERSIÓN MILLARES
*********************

TRABAJANDO_MILLAR
	LDAA 	CARACTER
	STAA 	DIGITO_MILLAR
	LDAA 	CONTADOR_MILLAR
	CMPA 	CARACTER    
	BLO 	ESCRIBIENDO_M
	JMP 	FIN_TRABAJANDO_DIGITO

ESCRIBIENDO_M
	LDAA  	#$00
	LDAB  	DIRECCION_CONVERSION
	XGDX
	LDAA  	#'M
	STAA  	$00,X
	INC   	DIRECCION_CONVERSION
	INC   	CONTADOR_MILLAR
	LDAA  	CONTADOR_MILLAR
	CMPA  	CARACTER
	BLO   	ESCRIBIENDO_M
	JMP   	FIN_TRABAJANDO_DIGITO

*********************
* CONVERSIÓN CENTENAS
*********************

TRABAJANDO_CENTENA
	LDAA	CARACTER
	STAA	DIGITO_CENTENA
	LDAB    CONTADOR_CENTENA
    CMPA    #$00
    BEQ     SALTO_CENTENA_FIN_TRABAJANDO_DIGITO
	CMPA	#$04
	BLO		ESCRIBIENDO_CENTENA_1_3
	BEQ 	ESCRIBIENDO_CENTENA_4
	CMPA    #$05
	ADDB	#$05
	STAB 	CONTADOR_CENTENA
	BEQ 	ESCRIBIENDO_CENTENA_5
	CMPA	#$09
	BEQ 	ESCRIBIENDO_CENTENA_9
	BNE		ESCRIBIENDO_CENTENA_5

SALTO_CENTENA_FIN_TRABAJANDO_DIGITO
	JMP 	FIN_TRABAJANDO_DIGITO
	
ESCRIBIENDO_CENTENA_1_3
	LDAA	#$00
	LDAB 	DIRECCION_CONVERSION
	XGDX
	LDAA	#'C
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	INC 	CONTADOR_CENTENA
	LDAA	CONTADOR_CENTENA
	CMPA  	CARACTER
	BLO   	ESCRIBIENDO_CENTENA_1_3
	JMP   	FIN_TRABAJANDO_DIGITO

ESCRIBIENDO_CENTENA_4
	LDAA	#$00
	LDAB 	DIRECCION_CONVERSION
	XGDX
	LDAA	#'C
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	INX
	LDAA	#'D
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	JMP		FIN_TRABAJANDO_DIGITO

ESCRIBIENDO_CENTENA_5
	LDAA	#$00
	LDAB 	DIRECCION_CONVERSION
	XGDX
	LDAA	#'D
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	LDAA 	CARACTER
	CMPA 	CONTADOR_CENTENA
	BNE 	ESCRIBIENDO_CENTENA_6_8
	BEQ		SALTO_CENTENA_FIN_TRABAJANDO_DIGITO

ESCRIBIENDO_CENTENA_6_8
	LDAA	#$00
	LDAB 	DIRECCION_CONVERSION
	XGDX
	LDAA	#'C
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	INC 	CONTADOR_CENTENA
	LDAA	CONTADOR_CENTENA
	CMPA  	CARACTER
	BLO   	ESCRIBIENDO_CENTENA_6_8
	JMP   	FIN_TRABAJANDO_DIGITO

ESCRIBIENDO_CENTENA_9
	LDAA	#$00
	LDAB 	DIRECCION_CONVERSION
	XGDX
	LDAA	#'C
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	INX
	LDAA	#'M
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	JMP		FIN_TRABAJANDO_DIGITO

*********************
* CONVERSIÓN DECENAS
*********************	

TRABAJANDO_DECENA
	LDAA	CARACTER
	STAA	DIGITO_DECENA
	LDAB    CONTADOR_DECENA
    CMPA    #$00
    BEQ     SALTO_DECENA_FIN_TRABAJANDO_DIGITO
	CMPA	#$04
	BLO		ESCRIBIENDO_DECENA_1_3
	BEQ 	ESCRIBIENDO_DECENA_4
	CMPA    #$05
	ADDB	#$05
	STAB 	CONTADOR_DECENA
	BEQ 	ESCRIBIENDO_DECENA_5
	CMPA	#$09
	BEQ 	ESCRIBIENDO_DECENA_9
	BNE		ESCRIBIENDO_DECENA_5

SALTO_DECENA_FIN_TRABAJANDO_DIGITO
	JMP 	FIN_TRABAJANDO_DIGITO
	
ESCRIBIENDO_DECENA_1_3
	LDAA	#$00
	LDAB 	DIRECCION_CONVERSION
	XGDX
	LDAA	#'X
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	INC 	CONTADOR_DECENA
	LDAA	CONTADOR_DECENA
	CMPA  	CARACTER
	BLO   	ESCRIBIENDO_DECENA_1_3
	JMP   	FIN_TRABAJANDO_DIGITO

ESCRIBIENDO_DECENA_4
	LDAA	#$00
	LDAB 	DIRECCION_CONVERSION
	XGDX
	LDAA	#'X
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	INX
	LDAA	#'L
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	JMP		FIN_TRABAJANDO_DIGITO

ESCRIBIENDO_DECENA_5
	LDAA	#$00
	LDAB 	DIRECCION_CONVERSION
	XGDX
	LDAA	#'L
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	LDAA 	CARACTER
	CMPA 	CONTADOR_DECENA
	BNE 	ESCRIBIENDO_DECENA_6_8
	BEQ		SALTO_DECENA_FIN_TRABAJANDO_DIGITO

ESCRIBIENDO_DECENA_6_8
	LDAA	#$00
	LDAB 	DIRECCION_CONVERSION
	XGDX
	LDAA	#'X
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	INC 	CONTADOR_DECENA
	LDAA	CONTADOR_DECENA
	CMPA  	CARACTER
	BLO   	ESCRIBIENDO_DECENA_6_8
	JMP   	FIN_TRABAJANDO_DIGITO

ESCRIBIENDO_DECENA_9
	LDAA	#$00
	LDAB 	DIRECCION_CONVERSION
	XGDX
	LDAA	#'X
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	INX
	LDAA	#'C
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	JMP		FIN_TRABAJANDO_DIGITO


*********************
* CONVERSIÓN UNIDADES
*********************	

TRABAJANDO_UNIDAD
	LDAA	CARACTER
	STAA	DIGITO_UNIDAD
	LDAB    CONTADOR_UNIDAD
    CMPA    #$00
    BEQ     SALTO_UNIDAD_FIN_TRABAJANDO_DIGITO
	CMPA	#$04
	BLO		ESCRIBIENDO_UNIDAD_1_3
	BEQ 	ESCRIBIENDO_UNIDAD_4
	CMPA    #$05
	ADDB	#$05
	STAB 	CONTADOR_UNIDAD
	BEQ 	ESCRIBIENDO_UNIDAD_5
	CMPA	#$09
	BEQ 	ESCRIBIENDO_UNIDAD_9
	BNE		ESCRIBIENDO_UNIDAD_5

SALTO_UNIDAD_FIN_TRABAJANDO_DIGITO
	JMP 	FIN_TRABAJANDO_DIGITO
	
ESCRIBIENDO_UNIDAD_1_3
	LDAA	#$00
	LDAB 	DIRECCION_CONVERSION
	XGDX
	LDAA	#'I
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	INC 	CONTADOR_UNIDAD
	LDAA	CONTADOR_UNIDAD
	CMPA  	CARACTER
	BLO   	ESCRIBIENDO_UNIDAD_1_3
	JMP   	FIN_TRABAJANDO_DIGITO

ESCRIBIENDO_UNIDAD_4
	LDAA	#$00
	LDAB 	DIRECCION_CONVERSION
	XGDX
	LDAA	#'I
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	INX
	LDAA	#'V
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	JMP		FIN_TRABAJANDO_DIGITO

ESCRIBIENDO_UNIDAD_5
	LDAA	#$00
	LDAB 	DIRECCION_CONVERSION
	XGDX
	LDAA	#'V
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	LDAA 	CARACTER
	CMPA 	CONTADOR_UNIDAD
	BNE 	ESCRIBIENDO_UNIDAD_6_8
	BEQ		SALTO_UNIDAD_FIN_TRABAJANDO_DIGITO

ESCRIBIENDO_UNIDAD_6_8
	LDAA	#$00
	LDAB 	DIRECCION_CONVERSION
	XGDX
	LDAA	#'I
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	INC 	CONTADOR_UNIDAD
	LDAA	CONTADOR_UNIDAD
	CMPA  	CARACTER
	BLO   	ESCRIBIENDO_UNIDAD_6_8
	JMP   	FIN_TRABAJANDO_DIGITO

ESCRIBIENDO_UNIDAD_9
	LDAA	#$00
	LDAB 	DIRECCION_CONVERSION
	XGDX
	LDAA	#'I
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	INX
	LDAA	#'X
	STAA	$00,X
	INC		DIRECCION_CONVERSION
	JMP		FIN_TRABAJANDO_DIGITO

FIN_TRABAJANDO_DIGITO
	INC   	CONTADOR_POSICION
	INC   	DIRECCION_CHAR_ACTUAL
	JMP   	TRABAJANDO_DIGITOS

*********************************
* LIMPIEZA DE TODA LA MEMORIA
*********************************
LIMPIEZA
	LDAA 	#$00
	STAA 	$00,X
	INX
	CPX 	#$0100
	BLS 	LIMPIEZA
	BEQ 	SALTO_INICIO_L

SALTO_INICIO_L
    JMP 	INICIO              


************************
* PROCESO DE ESCRITURA
************************
PROCESO_ESCRITURA
	LDX 	#DIRECCION_TEXTO
	LDAB	#'(
	STAB 	$00,X	
	INX

*********************
* ESCRITURA MILLARES
*********************

ESCRITURA_MILLARES	
	LDAA	DIGITO_MILLAR
	CMPA	#$00
	BEQ		SALTO_ESCRITURA_MILLARES_A_CENTENAS
	LDY		#MIL
	CMPA	#$01
	BEQ 	CICLO_ESCRITURA_MIL
	LDY 	#DOS
	CMPA	#$02
	BEQ 	SALTO_ESCRITURA_MILLARES
	LDY 	#TRES
	CMPA	#$03
	BEQ 	SALTO_ESCRITURA_MILLARES
	LDY 	#CUATRO
	CMPA	#$04
	BEQ 	SALTO_ESCRITURA_MILLARES
	LDY 	#CINCO
	CMPA	#$05
	BEQ 	SALTO_ESCRITURA_MILLARES	
	LDY 	#SEIS
	CMPA	#$06
	BEQ 	SALTO_ESCRITURA_MILLARES
	LDY 	#SIETE
	CMPA	#$07
	BEQ 	SALTO_ESCRITURA_MILLARES
	LDY 	#OCHO
	CMPA	#$08
	BEQ 	SALTO_ESCRITURA_MILLARES	
	LDY 	#NUEVE
	CMPA	#$09
	BEQ 	SALTO_ESCRITURA_MILLARES

SALTO_ESCRITURA_MILLARES
	JMP 	CICLO_ESCRITURA_MILLARES

SALTO_ESCRITURA_MILLARES_A_CENTENAS
	JMP 	ESCRITURA_CENTENAS

CICLO_ESCRITURA_MILLARES
	LDAB	$00,Y
	STAB 	$00,X                                  
	INX
	INY
	LDAB 	$00,Y
	CMPB 	#$20
	BNE 	CICLO_ESCRITURA_MILLARES
	LDAB	#$20
	STAB 	$00,X
	INX
	LDY		#MIL
	LDAB 	$00,Y
	BEQ 	CICLO_ESCRITURA_MIL

CICLO_ESCRITURA_MIL
	LDAB	$00,Y
	STAB 	$00,X                                  
	INX
	INY
	LDAB 	$00,Y
	CMPB 	#$20
	BNE 	CICLO_ESCRITURA_MIL
	LDAA 	DIGITO_CENTENA
	CMPA	#$00
	BEQ		ESCRITURA_CENTENAS
	LDAB	#$20
	STAB 	$00,X
	INX
	BEQ 	ESCRITURA_CENTENAS

*********************
* ESCRITURA CENTENAS
*********************

ESCRITURA_CENTENAS
	LDAA	DIGITO_CENTENA
	CMPA	#$00
	BEQ		SALTO_ESCRITURA_CENTENAS_A_DECENAS
	LDY 	#DOSCIENTOS
	CMPA	#$02
	BEQ 	SALTO_ESCRITURA_CENTENAS
	LDY 	#TRESCIENTOS
	CMPA	#$03
	BEQ 	SALTO_ESCRITURA_CENTENAS
	LDY 	#CUATROCIENTOS
	CMPA	#$04
	BEQ 	SALTO_ESCRITURA_CENTENAS
	LDY 	#QUINIENTOS
	CMPA	#$05
	BEQ 	SALTO_ESCRITURA_CENTENAS	
	LDY 	#SEISCIENTOS
	CMPA	#$06
	BEQ 	SALTO_ESCRITURA_CENTENAS
	LDY 	#SETECIENTOS
	CMPA	#$07
	BEQ 	SALTO_ESCRITURA_CENTENAS
	LDY 	#OCHOCIENTOS
	CMPA	#$08
	BEQ 	SALTO_ESCRITURA_CENTENAS	
	LDY 	#NOVECIENTOS
	CMPA	#$09
	BEQ 	SALTO_ESCRITURA_CENTENAS
	LDAB	DIGITO_DECENA
	CMPB	#$00
	BEQ		VERIFICA_UNIDAD_ESCRITURA_CIEN
	LDY		#CIENTO
	CMPA	#$01
	BEQ 	SALTO_ESCRITURA_CENTENAS

VERIFICA_UNIDAD_ESCRITURA_CIEN
	LDAB	DIGITO_UNIDAD
	CMPB	#$00
	BEQ		ESCRITURA_CIEN
	LDY		#CIENTO
	CMPA	#$01
	BEQ 	SALTO_ESCRITURA_CENTENAS

ESCRITURA_CIEN
	LDY		#CIEN
	CMPA	#$01
	BEQ 	SALTO_ESCRITURA_CENTENAS

SALTO_ESCRITURA_CENTENAS_A_DECENAS
	LDAA 	DIGITO_MILLAR
	CMPA	#$00
	BEQ		ESCRITURA_DECENAS
	LDAA 	DIGITO_DECENA
	CMPA	#$00
	BEQ		SALTO_ESCRITURA_CENTENAS_A_UNIDADES
	LDAB	#$20
	STAB 	$00,X
	INX
	JMP 	ESCRITURA_DECENAS

SALTO_ESCRITURA_CENTENAS
	JMP 	CICLO_ESCRITURA_CENTENAS

SALTO_ESCRITURA_CENTENAS_A_UNIDADES
	LDAA 	DIGITO_UNIDAD
	CMPA	#$00
	BEQ 	SALTO_CICLO_CIERRE_PARENTESIS
	LDAB	#$20
	STAB 	$00,X
	INX
	JMP 	ESCRITURA_UNIDADES	

SALTO_CICLO_CIERRE_PARENTESIS
	JMP 	CICLO_CIERRE_PARENTESIS

CICLO_ESCRITURA_CENTENAS
	LDAB	$00,Y
	STAB 	$00,X                                  
	INX
	INY
	LDAB 	$00,Y
	CMPB 	#$20
	BNE 	CICLO_ESCRITURA_CENTENAS
	LDAA 	DIGITO_DECENA
	CMPA	#$00
	BEQ		ESCRITURA_DECENAS
	LDAB	#$20
	STAB 	$00,X
	INX
	BEQ		ESCRITURA_DECENAS

*********************
* ESCRITURA DECENAS
*********************

ESCRITURA_DECENAS
	LDAA	DIGITO_DECENA
	CMPA	#$00
	BEQ		SALTO_ESCRITURA_VERIFICA_DECENAS_A_UNIDADES
	CMPA	#$01
	BEQ 	SALTO_ESCRITURA_EXCEPCION_DIEZ
	CMPA	#$02
	BEQ 	SALTO_ESCRITURA_EXCEPCION_VEINTE
	LDY 	#TREINTA
	CMPA	#$03
	BEQ 	SALTO_ESCRITURA_DECENAS
	LDY 	#CUARENTA
	CMPA	#$04
	BEQ 	SALTO_ESCRITURA_DECENAS
	LDY 	#CINCUENTA
	CMPA	#$05
	BEQ 	SALTO_ESCRITURA_DECENAS	
	LDY 	#SESENTA
	CMPA	#$06
	BEQ 	SALTO_ESCRITURA_DECENAS
	LDY 	#SETENTA
	CMPA	#$07
	BEQ 	SALTO_ESCRITURA_DECENAS
	LDY 	#OCHENTA
	CMPA	#$08
	BEQ 	SALTO_ESCRITURA_DECENAS	
	LDY 	#NOVENTA
	CMPA	#$09
	BEQ 	SALTO_ESCRITURA_DECENAS

SALTO_ESCRITURA_VERIFICA_DECENAS_A_UNIDADES
	LDAA 	DIGITO_MILLAR
	CMPA	#$00
	BNE 	SALTO_ESCRITURA_DECENAS_A_UNIDADES
	LDAA 	DIGITO_CENTENA
	CMPA	#$00
	BNE 	SALTO_ESCRITURA_DECENAS_A_UNIDADES
	LDAA 	DIGITO_DECENA
	CMPA	#$00
	BNE		SALTO_ESCRITURA_DECENAS_A_UNIDADES
	LDAA 	DIGITO_UNIDAD
	CMPA	#$00
	BNE 	SALTO_ESCRITURA_UNIDADES
	LDY 	#CERO
	JMP 	CICLO_ESCRITURA_UNIDADES

SALTO_ESCRITURA_DECENAS_A_UNIDADES
	LDAA 	DIGITO_UNIDAD
	CMPA	#$00
	BEQ		SALTO_ESCRITURA_UNIDADES
	LDAB	#$20
	STAB 	$00,X
	INX
	JMP 	ESCRITURA_UNIDADES

SALTO_ESCRITURA_EXCEPCION_DIEZ
	JMP 	ESCRITURA_EXCEPCION_DIEZ

SALTO_ESCRITURA_EXCEPCION_VEINTE
	JMP 	ESCRITURA_EXCEPCION_VEINTE

SALTO_ESCRITURA_DECENAS
	JMP 	CICLO_ESCRITURA_DECENAS	

CICLO_ESCRITURA_DECENAS
	LDAB	$00,Y
	STAB 	$00,X                                  
	INX
	INY
	LDAB 	$00,Y
	CMPB 	#$20
	BNE 	CICLO_ESCRITURA_DECENAS
	LDAA 	DIGITO_UNIDAD
	CMPA	#$00
	BEQ		SALTO_ESCRITURA_UNIDADES
	LDAB	#$20
	STAB 	$00,X
	INX
	LDAB	#'y
	STAB 	$00,X
	INX
	LDAB	#$20
	STAB 	$00,X
	INX
	BEQ		SALTO_ESCRITURA_UNIDADES

SALTO_ESCRITURA_UNIDADES
	JMP 	ESCRITURA_UNIDADES

***********************
* ESCRITURA EXCEPCIONES
***********************

ESCRITURA_EXCEPCION_DIEZ
	LDAB	DIGITO_UNIDAD
	LDY		#DIEZ
	CMPB	#$00
	BEQ		SALTO_EXCEPCION_ESCRITURA_DIEZ
	LDY		#ONCE
	CMPB	#$01
	BEQ 	SALTO_EXCEPCION_ESCRITURA_DIEZ
	LDY		#DOCE
	CMPB	#$02
	BEQ 	SALTO_EXCEPCION_ESCRITURA_DIEZ
	LDY 	#TRECE
	CMPB	#$03
	BEQ 	SALTO_EXCEPCION_ESCRITURA_DIEZ
	LDY 	#CATORCE
	CMPB	#$04
	BEQ 	SALTO_EXCEPCION_ESCRITURA_DIEZ
	LDY 	#QUINCE
	CMPB	#$05
	BEQ 	SALTO_EXCEPCION_ESCRITURA_DIEZ	
	LDY 	#DIECISEIS
	CMPB	#$06
	BEQ 	SALTO_EXCEPCION_ESCRITURA_DIEZ
	LDY 	#DIECISIETE
	CMPB	#$07
	BEQ 	SALTO_EXCEPCION_ESCRITURA_DIEZ
	LDY 	#DIECIOCHO
	CMPB	#$08
	BEQ 	SALTO_EXCEPCION_ESCRITURA_DIEZ	
	LDY 	#DIECINUEVE
	CMPB	#$09
	BEQ 	SALTO_EXCEPCION_ESCRITURA_DIEZ

SALTO_EXCEPCION_ESCRITURA_DIEZ
	JMP 	CICLO_ESCRITURA_EXCEPCIONES

ESCRITURA_EXCEPCION_VEINTE
	LDAB	DIGITO_UNIDAD
	LDY		#VEINTE
	CMPB	#$00
	BEQ		SALTO_EXCEPCION_ESCRITURA_VEINTE
	LDY		#VEINTIUNO
	CMPB	#$01
	BEQ 	SALTO_EXCEPCION_ESCRITURA_VEINTE
	LDY		#VEINTIDOS
	CMPB	#$02
	BEQ 	SALTO_EXCEPCION_ESCRITURA_VEINTE
	LDY 	#VEINTITRES
	CMPB	#$03
	BEQ 	SALTO_EXCEPCION_ESCRITURA_VEINTE
	LDY 	#VEINTICUATRO
	CMPB	#$04
	BEQ 	SALTO_EXCEPCION_ESCRITURA_VEINTE
	LDY 	#VEINTICINCO
	CMPB	#$05
	BEQ 	SALTO_EXCEPCION_ESCRITURA_VEINTE	
	LDY 	#VEINTISEIS
	CMPB	#$06
	BEQ 	SALTO_EXCEPCION_ESCRITURA_VEINTE
	LDY 	#VEINTISIETE
	CMPB	#$07
	BEQ 	SALTO_EXCEPCION_ESCRITURA_VEINTE
	LDY 	#VEINTIOCHO
	CMPB	#$08
	BEQ 	SALTO_EXCEPCION_ESCRITURA_VEINTE	
	LDY 	#VEINTINUEVE
	CMPB	#$09
	BEQ 	SALTO_EXCEPCION_ESCRITURA_VEINTE

SALTO_EXCEPCION_ESCRITURA_VEINTE
	JMP 	CICLO_ESCRITURA_EXCEPCIONES

CICLO_ESCRITURA_EXCEPCIONES
	LDAB	$00,Y
	STAB 	$00,X                                  
	INX
	INY
	LDAB 	$00,Y
	CMPB 	#$20
	BNE 	CICLO_ESCRITURA_EXCEPCIONES
	LDAB	#')
	STAB 	$00,X
	INX
	JMP		MAYUSCULA

***********************
* ESCRITURA UNIDADES
***********************

ESCRITURA_UNIDADES
	LDAA	DIGITO_UNIDAD
	CMPA	#$00
	BEQ		CICLO_CIERRE_PARENTESIS
	LDY		#UNO
	CMPA	#$01
	BEQ 	CICLO_ESCRITURA_UNIDADES
	LDY 	#DOS
	CMPA	#$02
	BEQ 	CICLO_ESCRITURA_UNIDADES
	LDY 	#TRES
	CMPA	#$03
	BEQ 	CICLO_ESCRITURA_UNIDADES
	LDY 	#CUATRO
	CMPA	#$04
	BEQ 	CICLO_ESCRITURA_UNIDADES
	LDY 	#CINCO
	CMPA	#$05
	BEQ 	CICLO_ESCRITURA_UNIDADES	
	LDY 	#SEIS
	CMPA	#$06
	BEQ 	CICLO_ESCRITURA_UNIDADES
	LDY 	#SIETE
	CMPA	#$07
	BEQ 	CICLO_ESCRITURA_UNIDADES
	LDY 	#OCHO
	CMPA	#$08
	BEQ 	CICLO_ESCRITURA_UNIDADES	
	LDY 	#NUEVE
	CMPA	#$09
	BEQ 	CICLO_ESCRITURA_UNIDADES

CICLO_ESCRITURA_UNIDADES
	LDAB	$00,Y
	STAB 	$00,X                                  
	INX
	INY
	LDAB 	$00,Y
	CMPB 	#$20
	BNE 	CICLO_ESCRITURA_UNIDADES
	LDAB	#')
	STAB 	$00,X
	INX
	JMP		MAYUSCULA

CICLO_CIERRE_PARENTESIS
	LDAB	#')
	STAB 	$00,X
	INX
	JMP		MAYUSCULA

*****************************
* ESCRITURA MAYUSCULA INICIAL
*****************************

MAYUSCULA
	LDX 	#DIRECCION_TEXTO
	INX
	LDAA 	$0071
	SUBA 	#32
	STAA 	$00,X
	INX
	JMP 	INICIO

***********************
* ESCRITURA ERRORES
***********************

ERROR_ENTRADA
	LDD 	#DIRECCION_ENTRADA
	ADDB 	NUMERO_CARACTERES
	INCB							
	XGDX                          
	LDY 	#TEXTO_ERROR_ENTRADA      
	JMP 	CICLO_ESCRITURA_ERRORES

ERROR_DECIMAL
	LDD 	#DIRECCION_ENTRADA
	ADDB 	NUMERO_CARACTERES
	INCB							
	XGDX                          
	LDY 	#TEXTO_ERROR_DECIMAL      
	JMP 	CICLO_ESCRITURA_ERRORES

ERROR_ROMANO
	LDD 	#DIRECCION_ENTRADA
	ADDB 	NUMERO_CARACTERES
	INCB							
	XGDX                          
	LDY 	#TEXTO_ERROR_ROMANO    
	JMP 	CICLO_ESCRITURA_ERRORES	

CICLO_ESCRITURA_ERRORES
	LDAB	$00,Y
	STAB 	$00,X                                  
	INX
	INY
	LDAB 	$00,Y
	CMPB 	#$20
	BNE 	CICLO_ESCRITURA_ERRORES
	BEQ 	SALTO_INICIO
SALTO_INICIO
      JMP 	INICIO

***************************
* BANCO DE NÚMEROS EN LETRA
***************************
      ORG $9000
CERO 			  FCC "cero "
UNO               FCC "uno "
DOS               FCC "dos "
TRES              FCC "tres "
CUATRO            FCC "cuatro "
CINCO             FCC "cinco "
SEIS              FCC "seis "
SIETE             FCC "siete "
OCHO              FCC "ocho "
NUEVE             FCC "nueve "
DIEZ              FCC "diez "
ONCE              FCC "once "
DOCE              FCC "doce "
TRECE             FCC "trece "
CATORCE           FCC "catorce "
QUINCE            FCC "quince "
DIECISEIS         FCC "diecisEis "
DIECISIETE        FCC "diecisiete "
DIECIOCHO         FCC "dieciocho "
DIECINUEVE        FCC "diecinueve "
VEINTE            FCC "veinte "
VEINTIUNO         FCC "veintiuno "
VEINTIDOS         FCC "veintidOs "
VEINTITRES        FCC "veintitrEs "
VEINTICUATRO      FCC "veinticuatro "
VEINTICINCO       FCC "veinticinco "
VEINTISEIS        FCC "veintisEis "
VEINTISIETE       FCC "veintisiete "
VEINTIOCHO        FCC "veintiocho "
VEINTINUEVE       FCC "veintinueve "
TREINTA           FCC "treinta "
CUARENTA          FCC "cuarenta "
CINCUENTA         FCC "cincuenta "
SESENTA           FCC "sesenta "
SETENTA           FCC "setenta "
OCHENTA           FCC "ochenta "
NOVENTA           FCC "noventa "
CIEN              FCC "cien "
CIENTO            FCC "ciento "
DOSCIENTOS        FCC "doscientos "
TRESCIENTOS       FCC "trescientos "
CUATROCIENTOS     FCC "cuatrocientos "
QUINIENTOS        FCC "quinientos "
SEISCIENTOS       FCC "seiscientos "
SETECIENTOS       FCC "setecientos "
OCHOCIENTOS       FCC "ochocientos "
NOVECIENTOS       FCC "novecientos "
MIL               FCC "mil "    

***************************
* BANCO DE ERRORES
***************************
TEXTO_ERROR_ENTRADA     FCC "error_de_entrada "
TEXTO_ERROR_DECIMAL     FCC "error_decimal_no_vAlido "
TEXTO_ERROR_ROMANO      FCC "error_romano_no_vAlido "

************************
* PROCESO SERIAL
************************
SERIAL
      LDD   	#$302C  * CONFIGURA PUERTO SERIAL
      STAA  	BAUD    * BAUD  9600  para cristal de 8MHz
      STAB  	SCCR2   * HABILITA  RX Y TX PERO INTERRUPCN SOLO RX
      LDAA  	#$00
      STAA  	SCCR1   * 8 BITS

      LDAA  	#$FE    * CONFIG PUERTO D COMO SALIDAS (EXCEPTO PD0)
      STAA  	DDRD    * SEA  ENABLE DEL DISPLAY  PD4  Y RS PD3

      LDAA  	#$04
      STAA  	HPRIO

      LDAA  	#$00
      TAP
      RTS

***********************************
* ATENCION A INTERRUPCION SERIAL
***********************************
      ORG  		$F100

      LDAA 		SCSR
      LDAA 		SCDR
      STAA 		ORDEN
      DEC  		CHAR_ENTRADA

      RTI

***********************************
* VECTOR INTERRUPCION SERIAL
***********************************
      ORG   	$FFD6
      FCB   	$F1,$00       

***********************************
*RESET
***********************************
      ORG    	$FFFE
RESET FCB    	$80,$00
***********************************
      END   	$8000